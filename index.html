<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kaya-Sem</title>
  <style>
        body {
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", "Courier New", monospace;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        a {
            text-decoration: none;
        }
        h3 {
            margin-bottom: 10px;
        }
        .top-section {
            display: flex;
            gap: 40px;
            margin-bottom: 20px;
        }
        .left-column {
            flex: 0 0 auto;
        }
        .right-column {
            flex: 1;
        }
        .graph-legend {
            margin-bottom: 0px;
            font-size: 0.9em;
            color: #666;
        }
        .legend-instructions {
            margin-bottom: 10px;
            font-style: italic;
        }
        .legend-items {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }
        .legend-item {
            display: block;
        }
        .legend-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 5px;
            vertical-align: middle;
        }
        .project-dot {
            background: #ff6b6b;
        }
        .tech-dot {
            background: #95a5a6;
        }
        .work-dot {
            background: #6c5ce7;
        }
        @media (max-width: 768px) {
            .top-section {
                flex-direction: column;
                gap: 20px;
            }
        }
  </style>
</head>
<body>
  <div class="top-section">
    <div class="left-column">
      <h3>Connect</h3>
      <ul>
        <li>
          <a href="https://github.com/Kaya-Sem" target="_blank" rel="noopener noreferrer">GitHub</a>
        </li>
        <li>
          <a href="https://www.linkedin.com/in/kaya-sem-70395a323/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
        </li>
      </ul>
      <!--
      <h3>Websites</h3>
      <ul>
        <li>
          <a href="https://kaya-scam.com/" target="_blank" rel="noopener noreferrer">Kaya-Scam</a>
        </li>
        <li>
          <a href="https://outdoorshops.kaya-sem.com/" target="_blank" rel="noopener noreferrer">Outdoor Gear Shops</a>
        </li>
        <li>
          <a href="https://rooftopper.club/" target="_blank" rel="noopener noreferrer">Rooftopper</a>
        </li>
        <li>
          <a href="https://broederbourgondier.be/" target="_blank" rel="noopener noreferrer">Broeder Bourgondiër</a>
        </li>
      </ul>
      -->
    </div>
    <div class="right-column">
      <h3>Projects & Experience</h3>
      <div class="graph-legend">
        <div class="legend-instructions">Click project nodes to view details • Drag nodes to explore</div>
        <div class="legend-items">
          <span class="legend-item"><span class="legend-dot project-dot"></span>Projects</span>
          <span class="legend-item"><span class="legend-dot work-dot"></span>Work Experience</span>
          <span class="legend-item"><span class="legend-dot tech-dot"></span>Technologies</span>
        </div>
      </div>
    </div>
  </div>
  <div id="graph-container"></div>
  <script src="https://d3js.org/d3.v7.min.js"></script> 
  <script>



        fetch('projects.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to load projects data');
                }
                return response.json();
            })
            .then(data => {
                createGraph(data);
            })
            .catch(error => {
                console.error('Error loading projects:', error);
                document.getElementById('graph-container').innerHTML = '<p>Error loading projects data. Please try refreshing the page.</p>';
            });

        function createGraph(data) {

        const projectNodes = data.projects.map(project => ({
            id: project.name,
            name: project.name,
            description: project.description,
            link: project.link,
            tags: project.tags,
            type: project.type || 'project'
        }));

        const allTags = [...new Set(data.projects.flatMap(project => project.tags))];
        
        const techNodes = allTags.map(tag => ({
            id: tag,
            name: tag,
            type: 'technology'
        }));

        const nodes = [...projectNodes, ...techNodes];

        const links = [];
        data.projects.forEach(project => {
            project.tags.forEach(tag => {
                links.push({
                    source: project.name,
                    target: tag
                });
            });
        });

        const container = document.getElementById("graph-container");
        container.innerHTML = '';
        
        const containerRect = container.getBoundingClientRect();
        const width = Math.max(700, containerRect.width - 40);
        const height = Math.max(500, window.innerWidth < 768 ? 500 : 700);
        const padding = 10;
        
        nodes.forEach(node => {
            node.x = Math.random() * width;
            node.y = Math.random() * height;
        }); 
        
        const svg = d3.select("#graph-container")
            .append("svg")
            .attr("width", width)
            .attr("height", height)
            .attr("viewBox", `0 0 ${width} ${height}`)
            .attr("preserveAspectRatio", "xMidYMid meet");

        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(80))
            .force("charge", d3.forceManyBody().strength(-350))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("collision", d3.forceCollide().radius(d => {
                if (d.type === 'technology') return 8;
                if (d.type === 'work') return 12;
                return 12;
            }))
            .force("x", d3.forceX(width / 2).strength(0.1))
            .force("y", d3.forceY(height / 2).strength(0.1));

        const link = svg.append("g")
            .selectAll("line")
            .data(links)
            .enter().append("line")
            .attr("stroke", "#999")
            .attr("stroke-opacity", 0.6)
            .attr("stroke-width", 1);

        const node = svg.append("g")
            .selectAll("circle")
            .data(nodes)
            .enter().append("circle")
            .attr("r", d => {
                if (d.type === 'technology') return 4;
                return 6;
            })
            .attr("fill", d => {
                if (d.type === 'technology') return "#95a5a6";
                if (d.type === 'work') return "#6c5ce7";
                return "#ff6b6b";
            })
            .attr("stroke", "#fff")
            .attr("stroke-width", 2)
            .style("cursor", d => (d.type === 'project' || d.type === 'work') ? "pointer" : "default")
            .on("mouseover", function(event, d) {
                d3.select(this)
                    .attr("r", d => d.type === 'technology' ? 6 : 8)
                    .attr("stroke-width", 3);
            })
            .on("mouseout", function(event, d) {
                d3.select(this)
                    .attr("r", d => {
                        if (d.type === 'technology') return 4;
                        return 6;
                    })
                    .attr("stroke-width", 2);
            })
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        const label = svg.append("g")
            .selectAll("text")
            .data(nodes)
            .enter().append("text")
            .text(d => d.name)
            .attr("font-size", "10px")
            .attr("fill", "#333")
            .attr("text-anchor", "middle")
            .attr("dy", "0.35em");

        node.append("title")
            .text(d => {
                if (d.type === 'technology') {
                    return `${d.name} (Technology)`;
                }
                if (d.type === 'work') {
                    return `${d.name} (Work Experience)\n${d.description}\nTags: ${d.tags.join(", ")}`;
                }
                return `${d.name}\n${d.description}\nTags: ${d.tags.join(", ")}`;
            });

        simulation.on("tick", () => {
            nodes.forEach(d => {
                const radius = d.type === 'technology' ? 4 : 6;
                d.x = Math.max(padding + radius, Math.min(width - padding - radius, d.x));
                d.y = Math.max(padding + radius, Math.min(height - padding - radius, d.y));
            });

            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node
                .attr("cx", d => d.x)
                .attr("cy", d => d.y);

            label
                .attr("x", d => d.x)
                .attr("y", d => {
                    if (d.type === 'technology') return d.y + 8;
                    return d.y + 15;
                });
        });

        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            const radius = d.type === 'technology' ? 4 : 6;
            d.fx = Math.max(padding + radius, Math.min(width - padding - radius, event.x));
            d.fy = Math.max(padding + radius, Math.min(height - padding - radius, event.y));
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        node.on("click", (event, d) => {
            if ((d.type === 'project' || d.type === 'work') && d.link) {
                window.open(d.link, "_blank", "noopener,noreferrer");
            }
        });
        }
  </script>
</body>
</html>
